{% extends 'blog/base.html' %}
{% block title %}{% if mode == 'create' %}新建文章{% else %}编辑文章{% endif %} · 我的 Django 博客{% endblock %}
{% block content %}
    <h1 class="mb-3">{% if mode == 'create' %}新建文章{% else %}编辑文章{% endif %}</h1>
    <form method="post" class="mb-3">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <div class="mb-3">
            <label class="form-label">标题</label>
            {{ form.title }}
            {{ form.title.errors }}
        </div>
        <div class="mb-3">
            <label class="form-label">分类</label>
            {{ form.category_name }}
            <div class="form-text">输入分类名，保存时自动创建或复用。</div>
            {{ form.category_name.errors }}
        </div>
        <div class="mb-3">
            <label class="form-label">正文</label>
            {{ form.content }}
            {{ form.content.errors }}
        </div>
        <div class="d-flex gap-2">
            <button class="btn btn-primary" type="submit">{% if mode == 'create' %}发布{% else %}保存{% endif %}</button>
            <a class="btn btn-outline-secondary" href="{% url 'blog:post_list' %}">取消</a>
        </div>
    </form>
{% endblock %}
